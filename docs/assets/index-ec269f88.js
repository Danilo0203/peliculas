(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))o(n);new MutationObserver(n=>{for(const s of n)if(s.type==="childList")for(const c of s.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&o(c)}).observe(document,{childList:!0,subtree:!0});function e(n){const s={};return n.integrity&&(s.integrity=n.integrity),n.referrerPolicy&&(s.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?s.credentials="include":n.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function o(n){if(n.ep)return;n.ep=!0;const s=e(n);fetch(n.href,s)}})();const p=async(a="movie")=>{const t={method:"GET",headers:{accept:"application/json",Authorization:"Bearer eyJhbGciOiJIUzI1NiJ9.eyJhdWQiOiI4NWUxZGMxNTdiYzc3MjcyZjNmOGRmOTI0ZWM2MzkxYyIsInN1YiI6IjY1MzQ5OTU1YzhhNWFjMDBjNTA5ZWE2OCIsInNjb3BlcyI6WyJhcGlfcmVhZCJdLCJ2ZXJzaW9uIjoxfQ.d4VaA9gpJHbB-9iGPDGRpV_7FHV0Gbb8asHtcS_JIpA"}};if(a==="movie"){const e="https://api.themoviedb.org/3/genre/movie/list?language=es";try{return(await(await fetch(e,t)).json()).genres}catch(o){console.log(o)}}else{const e="https://api.themoviedb.org/3/genre/tv/list?language=es";try{return(await(await fetch(e,t)).json()).genres}catch(o){console.log(o)}}},f=async a=>{const t=document.getElementById("filtro-generos"),e=await p(a);t.innerHTML="",e.forEach(({name:o,id:n})=>{const s=document.createElement("button");s.classList.add("btn"),s.innerText=o,s.setAttribute("data-id",n),t.appendChild(s)})},l=a=>{const t=document.querySelector("#populares .main__grid");t.innerHTML="",a.forEach(e=>{const{title:o,poster_path:n,release_date:s,genero:c,name:i,first_air_date:r,id:d}=e,v=new Date(e=s||r),u=` 
    <div class="main__media" data-id="${d}">
        <a href="#" class="main__media-thumb">
            <img class="main__media-img" src="https://image.tmdb.org/t/p/w500/${n}" alt="${e=i||o}" />
        </a>
        <p class="main__media-titulo">${e=i||o}</p>
        <p class="main__media-fecha">${c}</p>
        <p class="main__media-fecha">${v.getFullYear()}</p>
    </div>`;t.insertAdjacentHTML("beforeend",u)})},m=(a,t)=>{let e=t.find(o=>o.id===a);return(e==null?void 0:e.name)||"Not found gender"},_=async(a="movie")=>{const t={method:"GET",headers:{accept:"application/json",Authorization:"Bearer eyJhbGciOiJIUzI1NiJ9.eyJhdWQiOiI4NWUxZGMxNTdiYzc3MjcyZjNmOGRmOTI0ZWM2MzkxYyIsInN1YiI6IjY1MzQ5OTU1YzhhNWFjMDBjNTA5ZWE2OCIsInNjb3BlcyI6WyJhcGlfcmVhZCJdLCJ2ZXJzaW9uIjoxfQ.d4VaA9gpJHbB-9iGPDGRpV_7FHV0Gbb8asHtcS_JIpA"}};if(a==="movie"){const e="https://api.themoviedb.org/3/movie/popular?language=es-MEX&page=1";try{const s=(await(await fetch(e,t)).json()).results,c=await p(a);return s.forEach(i=>{const{genre_ids:r}=i,d=r[0];i.genero=m(d,c)}),s}catch(o){console.log(o)}}else{const e="https://api.themoviedb.org/3/tv/popular?language=es";try{const s=(await(await fetch(e,t)).json()).results,c=await p(a);return s.forEach(i=>{const{genre_ids:r}=i,d=r[0];i.genero=m(d,c)}),s}catch(o){console.log(o)}}},g=document.getElementById("movie"),h=document.getElementById("tv");g.addEventListener("click",async a=>{a.preventDefault(),f("movie");const t=await _("movie");l(t),g.classList.add("btn--active"),h.classList.remove("btn--active")});h.addEventListener("click",async a=>{a.preventDefault(),f("series");const t=await _("series");l(t),g.classList.remove("btn--active"),h.classList.add("btn--active")});const I=document.getElementById("filtro-generos");I.addEventListener("click",a=>{var t;a.preventDefault(),document.querySelector(".btn"),a.target.closest("button")&&((t=I.querySelector(".btn--active"))==null||t.classList.remove("btn--active"),a.target.classList.add("btn--active"))});const y=async(a=1)=>{var i,r;const t=new Date,e=(i=document.querySelector(".main__filtros .btn--active"))==null?void 0:i.id,o=(r=document.querySelector("#filtro-generos .btn--active"))==null?void 0:r.dataset.id,n=document.querySelector("#años-min").value||1950,s=document.querySelector("#años-max").value||t.getFullYear();let c;e==="movie"?c=`https://api.themoviedb.org/3/discover/movie?api_key=85e1dc157bc77272f3f8df924ec6391c&include_adult=true&include_video=false&language=es-MEX&page=${a}&primary_release_date.gte=${n}&primary_release_date.lte=${s}&sort_by=popularity.desc&with_genres=${o}`:e==="tv"&&(c=`https://api.themoviedb.org/3/discover/tv?api_key=85e1dc157bc77272f3f8df924ec6391c&first_air_date.gte=${n}&first_air_date.lte=${s}&include_adult=true&include_null_first_air_dates=false&language=es-MEX&page=${a}&sort_by=popularity.desc&with_genres=${o}`);try{const u=(await(await fetch(c)).json()).results,E=await p(e);return u.forEach(b=>{const{genre_ids:L}=b,j=L[0];b.genero=m(j,E)}),u}catch(d){console.log(d)}},J=document.getElementById("btn-buscar");J.addEventListener("click",async a=>{a.preventDefault();const t=await y();l(t)});const B=document.getElementById("pagina-anterior"),N=document.getElementById("pagina-siguiente");N.addEventListener("click",async a=>{const t=document.getElementById("populares").dataset.pagina;try{const e=await y(t+1);document.getElementById("populares").setAttribute("data-pagina",parseInt(t)+1),l(e),window.scrollTo(0,0)}catch(e){console.log(e)}});B.addEventListener("click",async a=>{const t=document.getElementById("populares").dataset.pagina;if(t>1)try{const e=await y(t-1);document.getElementById("populares").setAttribute("data-pagina",parseInt(t)-1),l(e),window.scrollTo(0,0)}catch(e){console.log(e)}});const M=async a=>{const t={method:"GET",headers:{accept:"application/json",Authorization:"Bearer eyJhbGciOiJIUzI1NiJ9.eyJhdWQiOiI4NWUxZGMxNTdiYzc3MjcyZjNmOGRmOTI0ZWM2MzkxYyIsInN1YiI6IjY1MzQ5OTU1YzhhNWFjMDBjNTA5ZWE2OCIsInNjb3BlcyI6WyJhcGlfcmVhZCJdLCJ2ZXJzaW9uIjoxfQ.d4VaA9gpJHbB-9iGPDGRpV_7FHV0Gbb8asHtcS_JIpA"}},e=document.querySelector(".main__filtros .btn--active").id;try{const o=`https://api.themoviedb.org/3/${e}/${a}?language=es-MEX'`,s=await(await fetch(o,t)).json();return console.log(s),s}catch(o){console.log(o)}},G=document.getElementById("populares"),O=document.getElementById("media");G.addEventListener("click",async a=>{if(a.target.closest(".main__media")){O.classList.add("media--active");const t=a.target.closest(".main__media").dataset.id,e=await M(t),o=`
            <div class="media__backdrop">
                <img src="https://image.tmdb.org/t/p/w500//${e.backdrop_path}"
                    class="media__backdrop-image" />
            </div>
            <div class="media__imagen">
                <img src="https://image.tmdb.org/t/p/w500//${e.poster_path}" class="media__poster" />
            </div>
            <div class="media__info">
                <h1 class="media__titulo">${e.original_title||e.name}</h1>
                <p class="media__fecha">${e.release_date||e.first_air_date}</p>
                <p class="media__overview">${e.overview}</p>
            </div>
            <button class="media__btn">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16"
                    class="media__btn-icono">
                    <path
                        d="M2.146 2.854a.5.5 0 1 1 .708-.708L8 7.293l5.146-5.147a.5.5 0 0 1 .708.708L8.707 8l5.147 5.146a.5.5 0 0 1-.708.708L8 8.707l-5.146 5.147a.5.5 0 0 1-.708-.708L7.293 8 2.146 2.854Z" />
                </svg>
            </button>`;document.querySelector("#media .media__contenedor").innerHTML=o}});const w=document.getElementById("media");w.addEventListener("click",a=>{a.target.closest("button")&&w.classList.remove("media--active")});(async()=>{const t=await _();l(t),f("movie")})();
